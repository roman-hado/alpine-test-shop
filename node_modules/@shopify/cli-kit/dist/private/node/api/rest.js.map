{"version":3,"file":"rest.js","sourceRoot":"","sources":["../../../../src/private/node/api/rest.ts"],"names":[],"mappings":"AAAA,OAAO,EAAC,YAAY,EAAC,MAAM,cAAc,CAAA;AAGzC,MAAM,UAAU,eAAe,CAAI,WAAe;IAChD,IAAI,CAAC,WAAW,EAAE;QAChB,OAAM;KACP;IACD,OAAO,IAAI,CAAC,SAAS,CAAC,WAAW,CAAC,CAAA;AACpC,CAAC;AAED,MAAM,UAAU,cAAc,CAAC,OAAqB,EAAE,UAAkB,EAAE,IAAY;IACpF,IAAI,oBAAoB,CAAC,OAAO,CAAC,EAAE;QACjC,OAAO,0DAA0D,UAAU,GAAG,IAAI,OAAO,CAAA;KAC1F;IAED,OAAO,WAAW,OAAO,CAAC,SAAS,cAAc,UAAU,GAAG,IAAI,OAAO,CAAA;AAC3E,CAAC;AAED,MAAM,CAAC,KAAK,UAAU,kBAAkB,CAAC,OAAqB;IAC5D,MAAM,KAAK,GAAG,OAAO,CAAC,SAAS,CAAA;IAC/B,MAAM,KAAK,GAAG,OAAO,CAAC,KAAK,CAAA;IAC3B,MAAM,OAAO,GAAG,MAAM,YAAY,CAAC,OAAO,CAAC,KAAK,CAAC,CAAA;IAEjD,IAAI,oBAAoB,CAAC,OAAO,CAAC,EAAE;QACjC,OAAO,CAAC,gBAAgB,CAAC,GAAG,KAAK,CAAA;QACjC,OAAO,CAAC,wBAAwB,CAAC,GAAG,KAAK,CAAA;KAC1C;IAED,OAAO,OAAO,CAAA;AAChB,CAAC;AAED,SAAS,oBAAoB,CAAC,OAAqB;IACjD,OAAO,OAAO,CAAC,KAAK,CAAC,UAAU,CAAC,SAAS,CAAC,CAAA;AAC5C,CAAC","sourcesContent":["import {buildHeaders} from './headers.js'\nimport {AdminSession} from '@shopify/cli-kit/node/session'\n\nexport function restRequestBody<T>(requestBody?: T) {\n  if (!requestBody) {\n    return\n  }\n  return JSON.stringify(requestBody)\n}\n\nexport function restRequestUrl(session: AdminSession, apiVersion: string, path: string) {\n  if (isThemeAccessSession(session)) {\n    return `https://theme-kit-access.shopifyapps.com/cli/admin/api/${apiVersion}${path}.json`\n  }\n\n  return `https://${session.storeFqdn}/admin/api/${apiVersion}${path}.json`\n}\n\nexport async function restRequestHeaders(session: AdminSession) {\n  const store = session.storeFqdn\n  const token = session.token\n  const headers = await buildHeaders(session.token)\n\n  if (isThemeAccessSession(session)) {\n    headers['X-Shopify-Shop'] = store\n    headers['X-Shopify-Access-Token'] = token\n  }\n\n  return headers\n}\n\nfunction isThemeAccessSession(session: AdminSession) {\n  return session.token.startsWith('shptka_')\n}\n"]}