{"version":3,"file":"kitchen-sink.js","sourceRoot":"","sources":["../../../src/cli/services/kitchen-sink.ts"],"names":[],"mappings":"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","sourcesContent":["import {error} from '@shopify/cli-kit'\nimport {\n  renderConcurrent,\n  renderFatalError,\n  renderInfo,\n  renderSelectPrompt,\n  renderSuccess,\n  renderTasks,\n  renderTextPrompt,\n  renderWarning,\n} from '@shopify/cli-kit/node/ui'\nimport {AbortSignal} from '@shopify/cli-kit/node/abort'\nimport {Writable} from 'stream'\n\nexport async function kitchenSink() {\n  renderInfo({\n    headline: 'CLI update available',\n    body: ['Run', {command: 'npm run shopify upgrade'}, {char: '.'}],\n  })\n\n  renderInfo({\n    headline: [\n      \"To connect this project to your shopify store's inventory:\",\n      {filePath: '/my-store/hydrogen.config.js'},\n      'with your store ID and Storefront API key.',\n    ],\n    body: [\n      'You can also try the following steps:',\n      {\n        list: {\n          items: [\n            ['Run', {command: 'shopify project connect'}],\n            ['Run', {command: 'hydrogen start'}],\n          ],\n        },\n      },\n    ],\n  })\n\n  renderInfo({\n    headline: [{userInput: 'my-app'}, 'initialized and ready to build.'],\n    nextSteps: [\n      [\n        'Run',\n        {\n          command: 'cd verification-app',\n        },\n      ],\n      [\n        'To preview your project, run',\n        {\n          command: 'npm app dev',\n        },\n      ],\n      [\n        'To add extensions, run',\n        {\n          command: 'npm generate extension',\n        },\n      ],\n    ],\n    reference: [\n      [\n        'Run',\n        {\n          command: 'npm shopify help',\n        },\n      ],\n      {\n        link: {\n          label: 'Dev docs',\n          url: 'https://shopify.dev',\n        },\n      },\n    ],\n  })\n\n  renderSuccess({\n    headline: 'CLI updated.',\n    body: 'You are now running version 3.47.',\n  })\n\n  renderSuccess({\n    headline: 'Deployment successful.',\n    body: 'Your extensions have been uploaded to your Shopify Partners Dashboard.',\n    nextSteps: [\n      {\n        link: {\n          label: 'See your deployment and set it live',\n          url: 'https://partners.shopify.com/1797046/apps/4523695/deployments',\n        },\n      },\n    ],\n  })\n\n  renderWarning({\n    headline: 'You have reached your limit of checkout extensions for this app.',\n    body: 'You can free up space for a new one by deleting an existing one.',\n  })\n\n  renderWarning({\n    headline: 'Required access scope update.',\n    body: 'The deadline for re-selecting your app scopes is May 1, 2022.',\n    reference: [\n      {\n        link: {\n          label: 'Dev docs',\n          url: 'https://shopify.dev/app/scopes',\n        },\n      },\n    ],\n  })\n\n  // Stack trace\n  const somethingWentWrong = new error.Bug('Something went wrong.')\n\n  somethingWentWrong.stack = `\n  Error: Unexpected error\n      at Module._compile (internal/modules/cjs/loader.js:1137:30)\n      at Object.Module._extensions..js (internal/modules/cjs/loader.js:1157:10)\n      at Module.load (internal/modules/cjs/loader.js:985:32)\n      at Function.Module._load (internal/modules/cjs/loader.js:878:14)\n`\n\n  renderFatalError(somethingWentWrong)\n\n  // Next Steps\n  const nextSteps = [\n    [\n      'Have you',\n      {\n        link: {\n          label: 'created a Shopify Partners organization',\n          url: 'https://partners.shopify.com/signup',\n        },\n      },\n      {\n        char: '?',\n      },\n    ],\n    'Have you confirmed your accounts from the emails you received?',\n    [\n      'Need to connect to a different App or organization? Run the command again with',\n      {\n        command: '--reset',\n      },\n    ],\n  ]\n\n  renderFatalError(new error.Abort('No Organization found', undefined, nextSteps))\n\n  await renderSelectPrompt({\n    message: 'Associate your project with the org Castile Ventures?',\n    choices: [\n      {label: 'first', value: 'first', key: 'f'},\n      {label: 'second', value: 'second', key: 's'},\n      {label: 'third', value: 'third'},\n      {label: 'fourth', value: 'fourth'},\n      {label: 'fifth', value: 'fifth', group: 'Automations', key: 'a'},\n      {label: 'sixth', value: 'sixth', group: 'Automations'},\n      {label: 'seventh', value: 'seventh'},\n      {label: 'eighth', value: 'eighth', group: 'Merchant Admin'},\n      {label: 'ninth', value: 'ninth', group: 'Merchant Admin'},\n      {label: 'tenth', value: 'tenth'},\n    ],\n    infoTable: {add: ['new-ext'], remove: ['integrated-demand-ext', 'order-discount']},\n  })\n\n  await renderTextPrompt({\n    message: 'App project name (can be changed later)',\n    placeholder: 'expansive commerce app',\n  })\n\n  // renderConcurrent at the end\n  let backendPromiseResolve: () => void\n\n  const backendPromise = new Promise<void>(function (resolve, _reject) {\n    backendPromiseResolve = resolve\n  })\n\n  const backendProcess = {\n    prefix: 'backend',\n    action: async (stdout: Writable, _stderr: Writable, _signal: AbortSignal) => {\n      stdout.write('first backend message')\n      await new Promise((resolve) => setTimeout(resolve, 1000))\n      stdout.write('second backend message')\n      await new Promise((resolve) => setTimeout(resolve, 1000))\n      stdout.write('third backend message')\n      await new Promise((resolve) => setTimeout(resolve, 1000))\n\n      backendPromiseResolve()\n    },\n  }\n\n  const frontendProcess = {\n    prefix: 'frontend',\n    action: async (stdout: Writable, _stderr: Writable, _signal: AbortSignal) => {\n      await backendPromise\n\n      stdout.write('first frontend message')\n      await new Promise((resolve) => setTimeout(resolve, 1000))\n      stdout.write('second frontend message')\n      await new Promise((resolve) => setTimeout(resolve, 1000))\n      stdout.write('third frontend message')\n    },\n  }\n\n  await renderConcurrent({processes: [backendProcess, frontendProcess]})\n\n  // renderTasks\n  const tasks = [\n    {\n      title: 'Installing dependencies',\n      task: async () => {\n        await new Promise((resolve) => setTimeout(resolve, 2000))\n      },\n    },\n    {\n      title: 'Downloading assets',\n      task: async () => {\n        await new Promise((resolve) => setTimeout(resolve, 2000))\n      },\n    },\n  ]\n\n  await renderTasks(tasks)\n}\n"]}