{"version":3,"file":"publish.js","sourceRoot":"","sources":["../../../../src/cli/commands/theme/publish.ts"],"names":[],"mappings":"AAAA,OAAO,EAAC,aAAa,EAAC,MAAM,gCAAgC,CAAA;AAC5D,OAAO,YAAY,MAAM,kCAAkC,CAAA;AAC3D,OAAO,EAAC,UAAU,EAAC,MAAM,gBAAgB,CAAA;AACzC,OAAO,EAAC,KAAK,EAAC,MAAM,aAAa,CAAA;AACjC,OAAO,EAAC,WAAW,EAAC,MAAM,2BAA2B,CAAA;AACrD,OAAO,EAAC,QAAQ,EAAC,MAAM,4BAA4B,CAAA;AACnD,OAAO,EAAC,yBAAyB,EAAC,MAAM,+BAA+B,CAAA;AAEvE,MAAM,CAAC,OAAO,OAAO,OAAQ,SAAQ,YAAY;IAkB/C,KAAK,CAAC,GAAG;QACP,MAAM,EAAC,KAAK,EAAE,IAAI,EAAC,GAAG,MAAM,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,CAAA;QAE/C,MAAM,KAAK,GAAG,MAAM,aAAa,CAAC,KAAK,CAAC,CAAA;QACxC,MAAM,WAAW,GAAG,IAAI,CAAC,gBAAgB,CAAC,KAAK,EAAE,EAAC,YAAY,EAAE,OAAO,CAAC,SAAS,EAAC,CAAC,CAAA;QACnF,MAAM,OAAO,GAAG,CAAC,OAAO,EAAE,SAAS,CAAC,CAAA;QACpC,IAAI,IAAI,CAAC,OAAO,EAAE;YAChB,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,CAAA;SAC3B;QACD,OAAO,CAAC,IAAI,CAAC,GAAG,WAAW,CAAC,CAAA;QAE5B,MAAM,YAAY,GAAG,MAAM,yBAAyB,CAAC,KAAK,EAAE,KAAK,CAAC,QAAQ,CAAC,CAAA;QAC3E,MAAM,QAAQ,CAAC,OAAO,EAAE,EAAC,YAAY,EAAC,CAAC,CAAA;IACzC,CAAC;;AA9BM,mBAAW,GAAG,uCAAuC,CAAA;AAErD,YAAI,GAAG,CAAC,EAAC,IAAI,EAAE,SAAS,EAAE,WAAW,EAAE,qBAAqB,EAAE,QAAQ,EAAE,KAAK,EAAC,CAAC,CAAA;AAE/E,aAAK,GAAG;IACb,GAAG,WAAW;IACd,QAAQ,EAAE,UAAU,CAAC,QAAQ;IAC7B,KAAK,EAAE,KAAK,CAAC,OAAO,CAAC;QACnB,IAAI,EAAE,GAAG;QACT,WAAW,EAAE,oBAAoB;QACjC,GAAG,EAAE,oBAAoB;KAC1B,CAAC;IACF,KAAK,EAAE,UAAU,CAAC,KAAK;CACxB,CAAA;AAEM,iBAAS,GAAG,CAAC,OAAO,CAAC,CAAA","sourcesContent":["import {getThemeStore} from '../../utilities/theme-store.js'\nimport ThemeCommand from '../../utilities/theme-command.js'\nimport {themeFlags} from '../../flags.js'\nimport {Flags} from '@oclif/core'\nimport {globalFlags} from '@shopify/cli-kit/node/cli'\nimport {execCLI2} from '@shopify/cli-kit/node/ruby'\nimport {ensureAuthenticatedThemes} from '@shopify/cli-kit/node/session'\n\nexport default class Publish extends ThemeCommand {\n  static description = 'Set a remote theme as the live theme.'\n\n  static args = [{name: 'themeId', description: 'The ID of the theme', required: false}]\n\n  static flags = {\n    ...globalFlags,\n    password: themeFlags.password,\n    force: Flags.boolean({\n      char: 'f',\n      description: 'Skip confirmation.',\n      env: 'SHOPIFY_FLAG_FORCE',\n    }),\n    store: themeFlags.store,\n  }\n\n  static cli2Flags = ['force']\n\n  async run(): Promise<void> {\n    const {flags, args} = await this.parse(Publish)\n\n    const store = await getThemeStore(flags)\n    const flagsToPass = this.passThroughFlags(flags, {allowedFlags: Publish.cli2Flags})\n    const command = ['theme', 'publish']\n    if (args.themeId) {\n      command.push(args.themeId)\n    }\n    command.push(...flagsToPass)\n\n    const adminSession = await ensureAuthenticatedThemes(store, flags.password)\n    await execCLI2(command, {adminSession})\n  }\n}\n"]}